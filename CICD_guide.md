### CI/CD (Continuous Integration/Continuous Delivery)

***

* **Что такое CI/CD**?

Это методология разработки и набор практик, при которых в код вносятся небольшие изменения с частыми коммитами для надежной и стабильной разработки. Относится к DevOps и Agile практикам. Зрелая практика CI/CD позволяет реализовать непрерывное развертывание: при успешном прохождении кода через CI/CD-конвейер, сборки автоматически развертываются в продакшн-окружении.

***

* **Что такое Docker**?

Технология для создания и управления контейнерами.


***

* **Что такое Docker Compose**?

Технология, если описывать её упрощённо, позволяет, с помощью одной команды, запускать множество сервисов (контейнеров). Таким образом, закрепим, Docker применяется для управления отдельными контейнерами (сервисами), из которых состоит приложение. Docker Compose используется для одновременного управления несколькими контейнерами, входящими в состав приложения. Этот инструмент предлагает те же возможности, что и Docker, но позволяет работать с более сложными приложениями.

***

* **Что такое Dockerfile**?

Dockerfile сообщает системе Docker о том, какие слои и в каком порядке надо добавить в образ.

Каждый слой, на самом деле, это всего лишь файл, который описывает изменение состояния образа в сравнении с тем состоянием, в котором он пребывал после добавления предыдущего слоя. 

***

* **Немного о Docker images**

Базовый образ — это то, что является исходным слоем (или слоями) создаваемого образа. Базовый образ ещё называют родительским образом.

При изменении исходного кода необходимо создавать новый образ поскольку они доступны только для чтения.

***

* **Инструкции Dockerfile**

**FROM** — задаёт базовый (родительский) образ.

**LABEL** — описывает метаданные. Например — сведения о том, кто создал и поддерживает образ.

**ENV** — устанавливает постоянные переменные среды.

**RUN** — выполняет команду и создаёт слой образа. Используется для установки в контейнер пакетов.

**COPY** — копирует в контейнер файлы и папки.

**ADD** — копирует файлы и папки в контейнер, может распаковывать локальные .tar-файлы.

**CMD** — описывает команду с аргументами, которую нужно выполнить когда контейнер будет запущен. Аргументы могут быть переопределены при запуске контейнера. В файле может присутствовать лишь одна инструкция CMD.

**WORKDIR** — задаёт рабочую директорию для следующей инструкции.

**ARG** — задаёт переменные для передачи Docker во время сборки образа.

**ENTRYPOINT** — предоставляет команду с аргументами для вызова во время выполнения контейнера. Аргументы не переопределяются.

**EXPOSE** — указывает на необходимость открыть порт.

**VOLUME** — создаёт точку монтирования для работы с постоянным хранилищем.

***

* **Простой пример Dockerfile**

```python
FROM python

WORKDIR /app

COPY . /app

CMD ["python", "index.py"]
```

***

* **В чем плюсы работы с Docker**?

Мы оборачиваем наше приложение в контейнер для того, чтобы он нам гарантировал одинаковое поведение в разных окружениях. Мы можем просто брать докер контейнеры и запускать их где угодно, где есть докер. Нам не важно, что это будет за ОС, какая это версия. Все поведение будет зафиксировано в контейнере.

***

* **Упрощенно о процессе работы с Docker**

~Сначала было слово...~ 

Сначала необходимо взять готовый/сбилдить образ -> на основе образа создать контейнер -> на основе контейнера запустить приложение.

***

* **Наиболее часто используемые команды Docker**

##### Базовые команды:

`docker` - помощь по командам докера.

`docker version` - проверяем версию.

##### Работа с образами:

`docker build .` - создание образа.

`docker images` - показать существующие образы.

`docker rmi IMAGE` - удалить конкретный образ.

##### Работа с контейнерами:

`docker run IMAGE_ID` - создать контейнер на основе конкретного образа. 

`docker start` - запуск существующих контейнеров.

`docker stop CONTAINER_ID` - остановить конкретный контейнер.

`docker rm CONTAINER_ID` - удалить конкретный контейнер.

`docker attach CONTAINER_ID` - подключиться к конкретному контейнеру.

`docker ps` - показать запущенные контейнеры.

`docker container prune` - удалить неиспользуемые контейнеры.

##### Деплой докер образов:

`docker tag OLD_NAME NEW_NAME` - переименовать образ.

`docker push REPO_NAME` - залить образ.

`docker pull` - забрать образ.

***
